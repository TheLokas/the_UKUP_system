{% extends "Sidebar.html" %}
{% block content %}
{{ super() }}

<div class="content container-fluid">
  <div class="card rounded-7 p-4 shadow-sm" style="background: #F9F9F9">

    <!-- Заголовок -->
    <div class="page-header mb-3">
      <h3 class="text-center mb-2" style="padding-right: 10%; padding-left: 10%;">
        Год приёма: {{ current_year }} | Направление: {{ current_direction.code }} {{ current_direction.name }}
      </h3>
    </div>

    <!-- Информация о дисциплине -->
    <div class="card mb-3 rounded-3">
      <div class="card-header bg-light">
        <h5 class="card-title mb-1">Информация о дисциплине</h5>
      </div>
      <div class="card-body p-3">
        <p class="card-text">
          <strong>{{ discipline.name }}</strong><br>
          Блок: {{ discipline.block.name }}<br>
          Модуль: {{ discipline.module.name }}<br>
          Кафедра: {{ discipline.department.name }}
        </p>
      </div>
    </div>

    <!-- Форма -->
    <form method="post" class="mb-1">
      <input name="current_year" id="year" type="hidden" value="{{ current_year }}">
      <input name="current_direction" id="direction" type="hidden" value="{{ current_direction.id }}">

        <div class="card rounded-3">
        <div class="card-header bg-light">
          <h5 class="card-title mb-1">Компетенции</h5>
        </div>

            <ul class="list-group list-group-flush">
            {% for competence in competencies %}
              <li class="list-group-item" style="background: #F9F9F9;">
                <strong>{{ competence.name }}</strong> – {{ competence.formulation }}
                {% for indicator in indicators %}
                   {% if indicator.name.split(".")[0] == competence.name %}
                      <div class="form-check mt-1">
                        <input class="form-check-input" id="{{ competence.id }}-{{ indicator.id }}" name="{{ competence.id }}" type="checkbox" value="{{ indicator.id }}"
                          {% if "{}-{}".format(competence.id, indicator.id) in checked %} checked {% endif %}>
                        <label class="form-check-label" for="{{ competence.id }}-{{ indicator.id }}">
                          {{ indicator.name }}
                        </label>
                      </div>
                  {% endif %}
                {% endfor %}
              </li>
            {% endfor %}
          </ul>


        </div>

      <!-- Кнопка -->
      <div class="row mt-3">
        <div class="col-12 col-md-4 mx-auto">
          {{ form.submit(value="Подтвердить", class="btn btn-primary w-100") }}
        </div>
      </div>
    </form>

  </div> <!-- конец белой карточки -->
</div>

{% endblock %}
